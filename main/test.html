<html><head>
<title>"CONFIG_LC_MDNS_INSTANCE" Control Panel</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
</head>
<body>
<h1>CONFIG_LC_MDNS_INSTANCE Control Panel</h1>
<h2>Alarm Clock Settings</h2>
<p>Time: <select id="alarm_hour"></select>:<select id="alarm_minute"></select></p>
<script>
// positioned at end so DOM elements are loaded
(function() {
//var settings_response = await fetch('/settings');
//var settings = await settings_response.json();
var settings = {
    "alarm_hour": 8,
    "alarm_minute": 45,
};
Object.keys(settings).forEach(function(setting_name) {

});
var alarm_hour_elem = document.getElementById('alarm_hour');
for (var hour = 1; hour <= 23; hour++) {
    var option_elem = document.createElement('option');
    option_elem.setAttribute('value', ''+hour);
    option_elem.innerText = ''+hour;
    alarm_hour_elem.appendChild(option_elem);
}
var alarm_min_elem = document.getElementById('alarm_minute');
for (var minute = 0; minute < 60; minute++) {
    var option_elem = document.createElement('option');
    option_elem.setAttribute('value', ''+minute);
    option_elem.innerText = ''+minute;
    alarm_min_elem.appendChild(option_elem);
}
// TODO: query real settings
var settings = {"alarm_hour":7,"alarm_minute":15};
Object.keys(settings).forEach(function(key){
    var sel_elem = document.getElementById(key);
    var val = settings[key];
    // TODO: actually map settings to dropdown values somehow
    sel_elem.selectedIndex = val-1;
});
// this is a zero-based array index
alarm_hour_elem.selectedIndex = 4-1;
}());
</script>
</body></html>